doctype html
html
  head
   link(href='https://fonts.googleapis.com/icon?family=Material+Icons', rel='stylesheet')

   link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css')
   link(rel='stylesheet', href='/stylesheets/style.css')
  
   meta(name='viewport', content='width=device-width, initial-scale=1.0')

   title Nodejs file upload with MongoDB

  body
    block content
      .container
        .row
        .col.s12
            nav(style="background-color: #C62705")
            x.nav-wrapper
              span.flow-text 
              | &nbsp; Upload your files
        
        form(action='#' method="POST" enctype="multipart/form-data")
          .row
            .col.s12
              if msg ==1
                .success
                  | Photo uploaded successfully
              else if msg == 2
                .error
                  | File size too large
              else if msg == 3
                .error
                  | Invalid file type. Only JPG, PNG or GIF file are allowed.      
          .row
            .col.s12 
              .file-field.input-field
                .btn.grey
                  span File
                  input(type='file' name="photo" required)
                .file-path-wrapper
                  input.file-path.validate(type='text' )
          .row
          .input-field.col.s12
            input#caption.validate(type='text' name="caption")
            label(for='caption') Caption 
          
          .row
            .col.s12 
              button.btn.waves-effect.waves-light(type='submit', name='action')
                | Upload
                i.material-icons.right send
          .row
            .col.s12
            h4 Photo Gallery
          if photolist.length
            | <div class="row">
            each pic, upload in photolist
              |<div class ="col s3"><img src = #{pic['path']} alt="image" class="responsive-img" /><p class="center-align caption">#{pic['caption']}</p></div> 
              if (((upload+1) % 4) == 0 )
              | </div><div class="row">
          else
          .row
              .col.s12
                .caption No photos uploaded yet.
    script(src='https://code.jquery.com/jquery-3.3.1.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js')
      
